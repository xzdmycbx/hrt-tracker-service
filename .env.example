# Server Configuration
PORT=8080
GIN_MODE=release

# CORS Configuration
# Comma-separated list of allowed origins, or "*" to allow all.
# Production: set to your frontend URL(s), e.g. https://app.example.com
# Development: use "*" or leave empty (defaults to "*")
CORS_ALLOWED_ORIGINS=*

# Database Configuration
DB_PATH=./data/hrt-tracker.db

# JWT Configuration
# CRITICAL: These secrets MUST be changed in production!
# Generate strong secrets using: openssl rand -base64 32
# Minimum length: 32 characters
JWT_ACCESS_SECRET=CHANGE_THIS_TO_A_STRONG_RANDOM_SECRET_AT_LEAST_32_CHARS
JWT_REFRESH_SECRET=CHANGE_THIS_TO_ANOTHER_STRONG_RANDOM_SECRET_AT_LEAST_32_CHARS
ACCESS_TOKEN_EXPIRE_HOURS=1

# Master Key Server Configuration
# CRITICAL: Generate strong random keys for production!
# Generate a 256-bit (64 hex characters) key using: openssl rand -hex 32

# Server master key version 1 (256-bit / 64 hex characters)
# Example command: openssl rand -hex 32
MASTER_KEY_SERVER_V1=CHANGE_THIS_64_HEX_CHARACTERS_LONG_KEY_USE_OPENSSL_RAND_HEX_32

# Current active version (new users will use this version)
MASTER_KEY_SERVER_CURRENT_VERSION=1

# Key Rotation Example:
# When rotating keys, add a new version and update CURRENT_VERSION:
# MASTER_KEY_SERVER_V2=<new-256-bit-hex-key>
# MASTER_KEY_SERVER_CURRENT_VERSION=2
# Keep old versions (V1) until all users are migrated

# Cloudflare Turnstile Configuration
# CRITICAL: Required for production to prevent automated attacks
# Get your keys from: https://dash.cloudflare.com/?to=/:account/turnstile

# Enable/disable Turnstile verification (true/false/1/0)
# Production: MUST be true
# Development: Can be false for testing
TURNSTILE_ENABLED=true

# Cloudflare Turnstile Secret Key
# CRITICAL: This MUST be set when TURNSTILE_ENABLED=true
# Keep this secret - never commit to version control or expose in frontend
TURNSTILE_SECRET_KEY=CHANGE_THIS_TO_YOUR_CLOUDFLARE_TURNSTILE_SECRET_KEY

# Optional: Allowed hostname for Turnstile verification
# Validates that tokens are generated from the specified domain
# Prevents token replay attacks across different domains
# Examples: example.com, app.example.com, localhost:3000
# Leave empty to skip hostname validation (not recommended for production)
TURNSTILE_ALLOWED_HOSTNAME=

# ─── Registration & OIDC Configuration ────────────────────────────────────────

# Disable local username/password registration (true/false)
# Set to true to require all new users to sign up via OIDC
# Existing local accounts are not affected
REGISTRATION_DISABLED=false

# Enable OIDC / OAuth2 login (true/false)
OIDC_ENABLED=false

# OIDC provider base URL
# The discovery document will be fetched from: <OIDC_PROVIDER_URL>/.well-known/openid-configuration
# Examples:
#   Keycloak:    https://sso.example.com/realms/myrealm
#   Authentik:   https://auth.example.com/application/o/myapp
#   Google:      https://accounts.google.com
#   GitHub:      https://token.actions.githubusercontent.com  (limited OIDC)
OIDC_PROVIDER_URL=

# OAuth2 client credentials (from your OIDC provider's app/client settings)
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=

# Frontend redirect URI — the page in your frontend that will receive the
# authorization code and state, then call POST /api/auth/oidc/callback.
# Must be registered as an allowed redirect URI in your OIDC provider.
# Example: https://app.example.com/auth/oidc/callback
OIDC_REDIRECT_URI=

# OAuth2 scopes to request (space-separated)
# Default covers standard OIDC profile claims
OIDC_SCOPES=openid profile email

# Automatically create a new account when an unknown OIDC identity logs in (true/false)
# true  — new users are registered on first OIDC login (recommended when REGISTRATION_DISABLED=true)
# false — only pre-existing accounts with a bound OIDC identity can log in
OIDC_AUTO_REGISTER=true
